# sim/sw
Software to run the different dark brem models within Geant4.

## Setup
We assume that you have sourced [the environment script](../README.md#envsh) already.

### Dark Brem Event Libraries
The G4DarkBreM method requires a "library" of dark brem events generated with MadGraph. These libraries can be generated with [dark-brem-lib-gen](https://github.com/tomeichlersmith/dark-brem-lib-gen).
The dark brem event libraries used for the paper were generated by version 4.1 of dark-brem-lib-gen. More detail on how to use that package is in that repository, but a quick reference for how the libraries for the studies in the paper were generated is below.
```bash
# setup dbgen environment and set cache/dest/work directories
dbgen use v4.1
dbgen run --nevents 50000 \
  --max_energy 100 \
  --min_energy 2 \
  --apmass 1 \
  --target copper \
  --lepton muon
dbgen run --nevents 50000 \
  --max_energy 4. \
  --min_energy 0.2 \
  --apmass 0.1 \
  --target tungsten \
  --lepton electron
```

## Building
After Setup is done, we can build it similar to how ldmx-sw is built.
```
cd sim/sw/
ldmx cmake -B build -S .
cd build
ldmx make install
```

## Reference

#### G4DarkBreM
The new dark brem model presented in the paper.

#### DMG4
We used DMG4 v1.2 released on March 18, 2022 and downloaded from [Mikhail Kirsanov's website](http://mkirsano.web.cern.ch/mkirsano/DMG4.tar.gz).
```bash
wget http://mkirsano.web.cern.ch/mkirsano/DMG4.tar.gz
tar xzf DMG4.tar.gz
```

#### cmake
Helping submodule for configuring the build within the CMake system

#### Framework
Processing framework used for writing out the events.

#### SimCore
Interface between the dark brem models, Geant4, and Framework. Includes necessary parts as well as many aspects leftover from [similar package within ldmx-sw](https://github.com/ldmx-software/SimCore)

#### Biasing
Plugins for simulation useful for running and debugging it. Again, includes many aspects leftover from ldmx-sw.
